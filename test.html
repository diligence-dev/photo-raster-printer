<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
        <style>
            img {
                position: relative;
            }

            body {
                margin: 0;
            }

            #wrap {
                position: relative;
            }

            #printerMarginDiv {
                background-color: green;
            }
        </style>
    </head>
    <body>
        <div id='printerMarginDiv'>
            <div id='wrap'></div>
        </div>
        <script src='https://code.jquery.com/jquery-3.1.1.min.js' integrity='sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=' crossorigin='anonymous'></script>
        <script type="text/javascript">
            const placeholder = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABHNCSVQICAgIfAhkiAAAAA1JREFUCJlj+D/T+D8ABzECy352aNAAAAAASUVORK5CYII='

            var pageWidth = 700
            var pageHeight = 700

            var printerMargin = 0
            var imageMargin = 15

            var columns = 3
            var rows = 3

            var printWidth = pageWidth - 2 * printerMargin
            var printHeight = pageHeight - 2 * printerMargin

            $('#printerMarginDiv').width(pageWidth).height(pageHeight)

            $('#wrap').width(printWidth).height(printHeight)
            .css('left', printerMargin).css('top', printerMargin)


            var effectiveWidth = printWidth - (columns - 1) * imageMargin
            var imgWidth = effectiveWidth / columns
            var effectiveHeight = printHeight - (rows - 1) * imageMargin
            var imgHeight = effectiveHeight / rows

            console.log(imgWidth)
            console.log(imgHeight)
            for (var y = 0; y < rows; y++) {
                for (var x = 0; x < columns; x++) {
                    $('<img>').attr('src', placeholder)
                    .width(imgWidth)
                    .height(imgHeight)
                    .css('top', y * imageMargin)
                    .css('left', x * imageMargin)
                    .appendTo($('#wrap'))
                }
            }
            console.log($('img'))
        </script>
    </body>
</html>
